/**
 * HubSpot Form Usability Enhancements - Enhanced Styling
 * 
 * This CSS module provides comprehensive styling for HubSpot embedded forms
 * with enhanced accessibility, validation, and user experience improvements.
 * 
 * FLEXBOX ORDERING SYSTEM:
 * When forms contain validation errors or progress bars, the step content
 * automatically becomes a flexbox container with the following order:
 * - order:0 - Headings, rich text content, images (introductory content)
 * - order:1 - Custom validation error boxes 
 * - order:2 - Progress bars
 * - order:3 - Form fields and input containers
 * - order:4 - Navigation buttons (submit/next)
 * 
 * This ensures validation errors always appear above progress bars,
 * both positioned just above the first form field, but below any 
 * introductory content like headings and paragraphs.
 */

/* 
 * CSS Custom Properties (Variables) - Default Values
 * 
 * Because these variables use var() references, you often only need to override
 * the base colors (--color-hs-form-primary, --color-hs-form-secondary, etc.) and the rest will
 * automatically update.
 */
:root {
  --font-hs-form-base: "Helvetica Neue", Helvetica, Arial, sans-serif;
  
  --color-hs-form-primary:oklch(0.5835 0.1505 250.88);
  --color-hs-form-primary-lt:oklch(0.9200 0.0800 250.88);
  --color-hs-form-primary-dk:oklch(0.3835 0.1705 250.88);
  --color-hs-form-secondary:oklch(0.6500 0.1400 195.00);
  --color-hs-form-secondary-lt:oklch(0.9200 0.0600 195.00);
  --color-hs-form-secondary-dk:oklch(0.4500 0.1600 195.00);
  --color-hs-form-neutral:oklch(0.5500 0.0050 250.00);
  --color-hs-form-neutral-hlt:oklch(0.9700 0.0020 250.00);
  --color-hs-form-neutral-lt:oklch(0.7000 0.0040 250.00);
  --color-hs-form-neutral-dk:oklch(0.2500 0.0070 250.00);
  --color-hs-form-focus-ring:oklch(0.6000 0.2000 250.88);
  --color-hs-form-error:oklch(0.6463 0.2409 29.23);
  --color-hs-form-error-lt:oklch(0.9700 0.0200 29.23);
  --color-hs-form-error-dk:oklch(0.4500 0.2200 29.23);
  --color-hs-form-warning:oklch(0.7800 0.1500 75.00);
  --color-hs-form-warning-lt:oklch(0.9700 0.0200 75.00);
  --color-hs-form-warning-dk:oklch(0.5500 0.1700 75.00);
  --color-hs-form-success:oklch(0.6500 0.1700 145.00);
  --color-hs-form-success-lt:oklch(0.9700 0.0225 145.00);
  --color-hs-form-success-dk:oklch(0.4500 0.1900 145.00);
  --color-hs-form-white:oklch(1 0 0);
  --color-hs-form-black:oklch(0 0 0);

  /* Custom properties for form theming */
  --color-hs-form-btn-primary-bg:var(--color-hs-form-primary);
  --color-hs-form-btn-primary-border:var(--color-hs-form-primary);
  --color-hs-form-btn-primary-text:var(--color-hs-form-white);
  --color-hs-form-btn-primary-hover-bg:var(--color-hs-form-primary-dk);
  --color-hs-form-btn-primary-hover-border:var(--color-hs-form-primary-dk);
  --color-hs-form-btn-primary-hover-text:var(--color-hs-form-white);
  --color-hs-form-btn-primary-focus-bg:var(--color-hs-form-primary-dk);
  --color-hs-form-btn-primary-focus-border:var(--color-hs-form-primary-dk);
  --color-hs-form-btn-primary-focus-text:var(--color-hs-form-white);

  --color-hs-form-btn-ancillary-bg:var(--color-hs-form-secondary);
  --color-hs-form-btn-ancillary-text:var(--color-hs-form-white);
  --color-hs-form-btn-ancillary-border:var(--color-hs-form-secondary);
  --color-hs-form-btn-ancillary-hover-bg:var(--color-hs-form-secondary-dk);
  --color-hs-form-btn-ancillary-hover-border:var(--color-hs-form-secondary-dk);
  --color-hs-form-btn-ancillary-hover-text:var(--color-hs-form-white);
  --color-hs-form-btn-ancillary-focus-bg:var(--color-hs-form-secondary-dk);
  --color-hs-form-btn-ancillary-focus-border:var(--color-hs-form-secondary-dk);
  --color-hs-form-btn-ancillary-focus-text:var(--color-hs-form-white);

  --color-hs-form-btn-disabled-bg:var(--color-hs-form-neutral-lt);
  --color-hs-form-btn-disabled-border:var(--color-hs-form-neutral-lt);
  --color-hs-form-btn-disabled-text:var(--color-hs-form-neutral-dk);

  --color-hs-form-field-bg:var(--color-hs-form-black);
  --color-hs-form-field-border:var(--color-hs-form-neutral-lt);
  --color-hs-form-field-border-hover:var(--color-hs-form-neutral-lt);
  --color-hs-form-field-border-hs-form-focus:var(--color-hs-form-primary);
  --color-hs-form-field-text:var(--color-hs-form-neutral);
  --color-hs-form-field-checked-bg:var(--color-hs-form-primary);
  --color-hs-form-placeholder-text:var(--color-hs-form-neutral-lt);

  --color-hs-form-selectlist-bg:var(--color-hs-form-white);
  --color-hs-form-selectlist-border:var(--color-hs-form-neutral-lt);
  --color-hs-form-selectlist-item-bg:var(--color-hs-form-white);
  --color-hs-form-selectlist-item-text:var(--color-hs-form-neutral);
  --color-hs-form-selectlist-item-hover-bg:var(--color-hs-form-neutral-hlt);
  --color-hs-form-selectlist-item-hover-text:var(--color-hs-form-neutral);
  --color-hs-form-selectlist-item-focus-bg:var(--color-hs-form-neutral-hlt);
  --color-hs-form-selectlist-item-focus-text:var(--color-hs-form-neutral);
  --color-hs-form-selectlist-caret-color:var(--color-hs-form-neutral-dk);

  --color-hs-form-focus-ring:var(--color-hs-form-focus-ring);

  --color-hs-form-headings:var(--color-hs-form-black);
  --color-hs-form-text:var(--color-hs-form-neutral);
  --color-hs-form-link:var(--color-hs-form-primary);
  --color-hs-form-link-hover:var(--color-hs-form-primary-dk);
  --color-hs-form-link-focus:var(--color-hs-form-primary-dk);

  --color-hs-form-label-text:var(--color-hs-form-neutral);
  --color-hs-form-label-description-text:var(--color-hs-form-neutral-lt);
  --color-hs-form-label-optional-text:var(--color-hs-form-neutral-lt);

  --color-hs-form-progress-bar-bg:var(--color-hs-form-white);
  --color-hs-form-progress-bar-border:var(--color-hs-form-neutral);
  --color-hs-form-progress-bar-fill:var(--color-hs-form-primary);

  --color-hs-form-required-indicator:var(--color-hs-form-error);
  --color-hs-form-error-message:var(--color-hs-form-error);
  --color-hs-form-error-box-bg:var(--color-hs-form-error-lt);
  --color-hs-form-error-border:var(--color-hs-form-error-dk);
  --color-hs-form-error-box-text:var(--color-hs-form-error);
  --color-hs-form-error-box-border:var(--color-hs-form-error);
  --color-hs-form-warning-message:var(--color-hs-form-warning);
  --color-hs-form-warning-border:var(--color-hs-form-warning-dk);
  --color-hs-form-success-message:var(--color-hs-form-success);
  --color-hs-form-success-box-bg:var(--color-hs-form-success-lt);
  --color-hs-form-success-box-border:var(--color-hs-form-success-dk);
  --color-hs-form-success-box-text:var(--color-hs-form-success);

  --color-hs-form-reverse-btn-primary-bg:var(--color-hs-form-white);
  --color-hs-form-reverse-btn-primary-border:var(--color-hs-form-white);
  --color-hs-form-reverse-btn-primary-text:var(--color-hs-form-primary);
  --color-hs-form-reverse-btn-primary-hover-bg:var(--color-hs-form-primary-lt);
  --color-hs-form-reverse-btn-primary-hover-border:var(--color-hs-form-primary-lt);
  --color-hs-form-reverse-btn-primary-hover-text:var(--color-hs-form-neutral-dk);
  --color-hs-form-reverse-btn-primary-focus-bg:var(--color-hs-form-primary-lt);
  --color-hs-form-reverse-btn-primary-focus-border:var(--color-hs-form-primary-lt);
  --color-hs-form-reverse-btn-primary-focus-text:var(--color-hs-form-neutral-dk);

  --color-hs-form-reverse-btn-ancillary-bg:var(--color-hs-form-white);
  --color-hs-form-reverse-btn-ancillary-border:var(--color-hs-form-white);
  --color-hs-form-reverse-btn-ancillary-text:var(--color-hs-form-secondary);
  --color-hs-form-reverse-btn-ancillary-hover-bg:var(--color-hs-form-secondary-lt);
  --color-hs-form-reverse-btn-ancillary-hover-border:var(--color-hs-form-secondary-lt);
  --color-hs-form-reverse-btn-ancillary-hover-text:var(--color-hs-form-neutral-dk);
  --color-hs-form-reverse-btn-ancillary-focus-bg:var(--color-hs-form-secondary-lt);
  --color-hs-form-reverse-btn-ancillary-focus-border:var(--color-hs-form-secondary-lt);
  --color-hs-form-reverse-btn-ancillary-focus-text:var(--color-hs-form-neutral-dk);

  --color-hs-form-reverse-bg:var(--color-hs-form-primary);
  --color-hs-form-reverse-text:var(--color-hs-form-white);
  --color-hs-form-reverse-link:var(--color-hs-form-white);
  --color-hs-form-reverse-field-bg:var(--color-hs-form-white);
  --color-hs-form-reverse-field-checked-bg:var(--color-hs-form-neutral-lt);
  --color-hs-form-reverse-hs-form-focus-ring:var(--color-hs-form-focus-ring);
  --color-hs-form-reverse-progress-bar-bg:var(--color-hs-form-white);
  --color-hs-form-reverse-progress-bar-border:var(--color-hs-form-neutral-lt);
  --color-hs-form-reverse-progress-bar-fill:var(--color-hs-form-neutral-lt);
}


/* Main form container styling */
div[data-hsfc-id=Renderer] {
  form {
    position:relative; margin-left:auto; margin-right:auto; color:var(--color-hs-form-text); font-family:var(--font-hs-form-base);
    
    & .hsfc-Step {
      border:none;
      /* JS will add .hsfc-step-with-validation-and-progress if .hsfc-CustomValidationError or .hsfc-ProgressBar--repositioned is present */
      &.hsfc-step-with-validation-and-progress,
      &:has(.hsfc-CustomValidationError, .hsfc-ProgressBar--repositioned) {
        display:flex; flex-direction:column;
      }
      & .hsfc-Step__Content { padding:0;
        /* JS will add .hsfc-content-with-validation-and-progress if .hsfc-CustomValidationError or .hsfc-ProgressBar--repositioned is present */
        &.hsfc-content-with-validation-and-progress,
        &:has(.hsfc-CustomValidationError, .hsfc-ProgressBar--repositioned) {
          display:flex; flex-direction:column;
        }
      }
      & .hsfc-ErrorAlert.hsfc-SimpleNotification { margin-bottom:1.25rem; padding:0.5rem 0.75rem; background:var(--color-hs-form-error-message); line-height:1.375; font-size:0.875rem; color:var(--color-hs-form-error-message); border:1px solid var(--color-hs-form-error-border); }
      & .hsfc-Step__Banner { display:none; }
    }

    & .hsfc-Row {
      /* Content Elements - ensure they appear before validation errors and progress bars */
      flex-direction:row; justify-content:stretch; align-items:flex-start; flex-wrap:nowrap; gap:1.5rem;
      @media (min-width:768px) {
        display:flex;
      }
      & > div {
        flex:1 1 0%;
      }
      & h1, & h2, & h3 {
        color:var(--color-hs-form-headings);
        order:0; /* Ensure headings appear first */
      }
      & .hsfc-RichText {
        margin-bottom:1.5rem; font-size:0.875rem;
        order:0; /* Ensure rich text content appears first */
        & p {
          &:last-child {
            margin-bottom:0;
          }
        }
        & a {
          color:var(--color-hs-form-link); text-decoration-color: var(--color-hs-form-link);
          &:hover {
            color:var(--color-hs-form-link-hover); text-decoration-color: var(--color-hs-form-link-hover);
          }
          &:focus {
            color:var(--color-hs-form-link-focus); text-decoration-color: var(--color-hs-form-link-focus);
          }
        }
        &:last-child {
          margin-bottom:0;
        }
      }
      & .hsfc-LinkImage {
        margin-bottom:1.5rem;
        order:0; /* Ensure images appear first */
      }

      /* Form Labels and Descriptions */
      & label {
        display:inline-block; max-width:100%; font-size:0.875rem; color:var(--color-hs-form-label-text); font-weight:bold;
        &+ .hsfc-FieldDescription {
          width:auto !important; font-size:0.75rem; color:var(--color-hs-form-label-description-text); font-weight:normal;
          & span {
            background:var(--color-hs-form-btn-primary-bg); color:var(--color-hs-form-btn-primary-text); font-size:1rem; font-weight:bold; padding:0.25rem 1.5rem; border:1px solid var(--color-hs-form-btn-primary-border); transition-property:color,background-color,border-color,text-decoration-color,fill,stroke; transition-duration:300ms; outline-width:2px; outline-color:var(--color-hs-form-focus-ring);
          }
          /* JS will add .hsfc-label-without-required if .hsfc-FieldLabel__RequiredIndicator is NOT present */
          &.hsfc-label-without-required > span::after,
          &:not(:has(.hsfc-FieldLabel__RequiredIndicator)) > span::after {
            background:var(--color-hs-form-btn-primary-hover-bg);
            border-color:var(--color-hs-form-btn-primary-hover-border);
            color:var(--color-hs-form-btn-primary-hover-text);
            content:'Optional'; margin-left:0.5rem; font-size:0.75rem; text-transform:none; color:var(--color-hs-form-label-description-text); font-weight:normal;
          }
          &+ div.hsfc-CheckboxFieldGroup__Options{
            background:var(--color-hs-form-btn-disabled-bg); border-color:var(--color-hs-form-btn-disabled-border); color:var(--color-hs-form-btn-disabled-text); cursor:not-allowed; content:'';
          }
          @media screen and (min-width:768px) {
            display:inline-block; margin-left:.5rem;
          }
        }
      }
      & .hsfc-FieldLabel__RequiredIndicator {
        margin-left:0.25rem; color:var(--color-hs-form-error-message);
      }

      /* Basic Input Elements */
      & input[type=text], & input[type=email], & input[type=tel], & select, & textarea, & .hsfc-DropdownInput input[type="button"] {
        display:block; text-align:left; border:1px solid var(--color-hs-form-field-border); font-size:1rem; color:var(--color-hs-form-field-text); padding:0.5rem 1rem;
        &::placeholder { color:var(--color-hs-form-placeholder-text); }
      }
      & input[type=checkbox]:checked, & input[type=radio]:checked {
        background:var(--color-hs-form-field-checked-bg);
      }
      & .hsfc-DropdownInput {
        position:relative;
        & input[type="button"] { padding-right:2rem; }
        & .hsfc-DropdownInput__Caret > span { display:block; position:absolute; top:.75rem; right:1rem; width:1rem; height:1rem;background-repeat:no-repeat; background-size:cover; background-position:center;
          &::after  {
            content: '';
            position: relative; z-index: 1; display: block; width: 1rem; height: 1rem;
            background: var(--color-hs-form-selectlist-caret-color) no-repeat center/contain;
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M4.21967 6.21967C4.51256 5.92678 4.98744 5.92678 5.28033 6.21967L8 8.93934L10.7197 6.21967C11.0126 5.92678 11.4874 5.92678 11.7803 6.21967C12.0732 6.51256 12.0732 6.98744 11.7803 7.28033L8.53033 10.5303C8.23744 10.8232 7.76256 10.8232 7.46967 10.5303L4.21967 7.28033C3.92678 6.98744 3.92678 6.51256 4.21967 6.21967Z'/%3E%3C/svg%3E");
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M4.21967 6.21967C4.51256 5.92678 4.98744 5.92678 5.28033 6.21967L8 8.93934L10.7197 6.21967C11.0126 5.92678 11.4874 5.92678 11.7803 6.21967C12.0732 6.51256 12.0732 6.98744 11.7803 7.28033L8.53033 10.5303C8.23744 10.8232 7.76256 10.8232 7.46967 10.5303L4.21967 7.28033C3.92678 6.98744 3.92678 6.51256 4.21967 6.21967Z'/%3E%3C/svg%3E");
          }
        }
      }  
      & textarea {
        min-height:4rem; max-height:8rem; /* roughly 500char for limit */
      }              

      /* Field Container Styles */
      & .hsfc-CheckboxFieldGroup, & .hsfc-DateField, & .hsfc-DropdownField, & .hsfc-EmailField, & .hsfc-FileField, & .hsfc-NumberField, & .hsfc-PhoneField, & .hsfc-RadioFieldGroup, & .hsfc-TextareaField, & .hsfc-TextField {
        margin-bottom:1rem; order:3; /* Ensure form fields appear after validation errors (order:1) and progress bars (order:2) */
        }
        /* JS will add .hsfc-row-with-form-inputs if input, select, or textarea is present */
        &.hsfc-row-with-form-inputs,
        &:has(input, select, textarea, .hsfc-RichText) {
          order:3;
        }
      & .hsfc-DropdownInput, & .hsfc-EmailInput, & .hsfc-FileInput, & .hsfc-PhoneInput, & .hsfc-Select, & .hsfc-TextareaInput, & .hsfc-TextInput {
        display:flex; flex-direction:row; position:relative; width:100%; color:var(--color-hs-form-field-text);
      }

      /* Checkbox and Radio Field Styles */
      & .hsfc-CheckboxField, & .hsfc-CheckboxFieldGroup, & .hsfc-RadioFieldGroup {
        margin-bottom:0.75rem;
        & input[type="checkbox"], & input[type="radio"] { margin-right:0.5rem; margin-bottom:0.25rem; }
      }
      & .hsfc-CheckboxField label, & .hsfc-CheckboxFieldGroup .hsfc-CheckboxFieldGroup__Options label {
        font-weight:normal;
      }

      /* Specialized Field Components */
      & .hsfc-DataPrivacyField {
        font-size:0.75rem;
        & .hsfc-RichText {
          margin-bottom:0.25rem; font-size:0.75rem;
          & span, & span a {
            color:inherit !important; font-size:inherit !important;
          }
        }
      }
      & .hsfc-DropdownOptions {
        display:flex; flex-direction:column; position:absolute; top:0 !important; left:0 !important; width:100%; overflow:hidden; padding-top:0.5rem; padding-bottom:0.5rem; background:var(--color-hs-form-selectlist-bg); border:1px solid var(--color-hs-form-selectlist-border); box-shadow:0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1); z-index:10000;
        & .hsfc-DropdownOptions__Search {
          flex:0 0 auto; padding-left:0.5rem; padding-right:0.5rem;
        }
        & .hsfc-DropdownOptions__List {
          flex:1 1 0%; padding-top:0.5rem; padding-bottom:0.5rem; margin:0; overflow-y:auto;
          & .hsfc-DropdownOptions__List__ListItem {
            padding:0.5rem; cursor:pointer; background:var(--color-hs-form-selectlist-item-bg); color:var(--color-hs-form-selectlist-item-text); filter:none;
            &:hover {
              background:var(--color-hs-form-selectlist-item-hover-bg); color:var(--color-hs-form-selectlist-item-hover-text);
            }
            &:focus {
              background:var(--color-hs-form-selectlist-item-focus-bg); color:var(--color-hs-form-selectlist-item-focus-text);
            }
          }
        }
      }
      & .hsfc-FileInput {
        display:flex; flex-direction:column; font-size:0.875rem;
        &::file-selector-button {
          margin-right:0.5rem; padding-top:0.25rem; padding-bottom:0.25rem; padding-left:1rem; padding-right:1rem; background:var(--color-hs-form-btn-ancillary-bg); color:var(--color-hs-form-btn-ancillary-text); border:1px solid var(--color-hs-form-btn-ancillary-border); font-size:0.875rem; font-weight:bold; transition-property:color,background-color,border-color,text-decoration-color,fill,stroke; transition-duration:300ms;
          &:hover:not(:disabled) {
            background:var(--color-hs-form-btn-ancillary-hover-bg); border-color:var(--color-hs-form-btn-ancillary-hover-border); color:var(--color-hs-form-btn-ancillary-hover-text);
          }
          &:focus:not(:disabled), &:focus-visible:not(:disabled) {
            background:var(--color-hs-form-btn-ancillary-focus-bg); border-color:var(--color-hs-form-btn-ancillary-focus-border); color:var(--color-hs-form-btn-ancillary-focus-text);
          }
        }
      }
      & .hsfc-PhoneInput {
        display:flex;
        & .hsfc-PhoneInput__FlagAndCaret {
          position:relative; display:flex; flex-direction:row; justify-content:space-between; align-items:center; gap:5px; padding-left:0.5rem; padding-right:2rem; border:1px solid var(--color-hs-form-field-border); border-right:0; cursor:pointer; background-color:var(--color-hs-form-selectlist-bg);
          & .hsfc-PhoneInput__FlagAndCaret__Caret {
            display:block; position:absolute; top:.75rem; right:.5rem; width:1rem; height:1rem;background-repeat:no-repeat; background-size:cover; background-position:center;
            &::after  {
              content: '';
              position: relative; z-index: 1; display: block; width: 1rem; height: 1rem;
              background: var(--color-hs-form-selectlist-caret-color) no-repeat center/contain;
              mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M4.21967 6.21967C4.51256 5.92678 4.98744 5.92678 5.28033 6.21967L8 8.93934L10.7197 6.21967C11.0126 5.92678 11.4874 5.92678 11.7803 6.21967C12.0732 6.51256 12.0732 6.98744 11.7803 7.28033L8.53033 10.5303C8.23744 10.8232 7.76256 10.8232 7.46967 10.5303L4.21967 7.28033C3.92678 6.98744 3.92678 6.51256 4.21967 6.21967Z'/%3E%3C/svg%3E");
              -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M4.21967 6.21967C4.51256 5.92678 4.98744 5.92678 5.28033 6.21967L8 8.93934L10.7197 6.21967C11.0126 5.92678 11.4874 5.92678 11.7803 6.21967C12.0732 6.51256 12.0732 6.98744 11.7803 7.28033L8.53033 10.5303C8.23744 10.8232 7.76256 10.8232 7.46967 10.5303L4.21967 7.28033C3.92678 6.98744 3.92678 6.51256 4.21967 6.21967Z'/%3E%3C/svg%3E");
            }
          }
        }
      }

      /* Alert Messages */
      & .hsfc-CharacterCounter {
        float:right; font-size:0.75rem; color:var(--color-hs-form-label-description-text);
        &.hsfc-CharacterCounter--default {
          color:var(--color-hs-form-label-description-text); font-weight:normal;
        }
        &.hsfc-CharacterCounter--warning {
          color:var(--color-hs-form-warning-message); font-weight:bold;
        }
        &.hsfc-CharacterCounter--danger {
          color:var(--color-hs-form-error-message); font-weight:bold;
        }
      }
      & .hsfc-TextareaInput {
        &.hsfc-Textarea--warning:focus {
          border-color:var(--color-hs-form-warning-border);
        }
        &.hsfc-Textarea--danger:focus {
          border-color:var(--color-hs-form-error-border);
        }
      }
      & .hsfc-ErrorAlert {
        display:flex; flex-direction:row; align-items:center; margin-top:0.25rem; margin-bottom:0.25rem; line-height:1.25; font-size:0.875rem; color:var(--color-hs-form-error-message); font-weight:bold;
        &::before {
          content:'';
          flex-shrink:0; width:1.5rem; height:1.5rem; display:inline-block; margin-right:0.25rem; background:var(--color-hs-form-error-message) no-repeat center/contain;
          mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='white' d='M11.001 10h2v5h-2zm0 7h2v2h-2z'/%3E%3Cpath fill='white' d='M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z'/%3E%3C/svg%3E");
          -webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='white' d='M11.001 10h2v5h-2zm0 7h2v2h-2z'/%3E%3Cpath fill='white' d='M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z'/%3E%3C/svg%3E");
        }
        
        /* Hide HubSpot's native character limit error messages immediately - now handled by JS */
      }
      & .hsfc-InfoAlert {
        font-size:0.875rem; color:var(--color-hs-form-label-description-text); font-weight:bold;
      }
      & .hsfc-AcceptedFiles {
        margin-top:0.5rem; padding:0.5rem 0.75rem; background:var(--color-hs-form-success-box-bg); font-size:0.875rem; color:var(--color-hs-form-success-box-text); border:1px solid var(--color-hs-form-success-box-border); 
      }
    }
    
    & .hsfc-NavigationRow {
      text-align:right; margin-top:1rem;
      order:4; /* Ensure navigation appears after all form content */
      
      & button {
        background:var(--color-hs-form-btn-primary-bg); color:var(--color-hs-form-btn-primary-text); font-size:1rem; font-weight:bold; padding:0.25rem 1.5rem; transition-property:color, background-color, border-color, text-decoration-color, fill, stroke; transition-duration:300ms;
        &[type="submit"], &[type="button"] {
          background:var(--color-hs-form-btn-primary-bg); border:2px solid var(--color-hs-form-btn-primary-border); color:var(--color-hs-form-btn-primary-text);
        }
        &:hover {
          background:var(--color-hs-form-btn-primary-hover-bg); border-color:var(--color-hs-form-btn-primary-hover-border); color:var(--color-hs-form-btn-primary-hover-text);
        }
        &:focus {
          background:var(--color-hs-form-btn-primary-focus-bg); border-color:var(--color-hs-form-btn-primary-focus-border); color:var(--color-hs-form-btn-primary-focus-text);
        }
        &:disabled {
          background:var(--color-hs-form-btn-disabled-bg); cursor:not-allowed;
        }
        &+ button {
          margin-left:1rem;
        }
      }
      & .hsfc-ErrorAlert {
        font-size:1rem; color:var(--color-hs-form-error-message); font-weight:bold; margin-bottom:1rem;
      }
    }
    
    & .hsfc-ProgressBar {
      display:block; width:100%;
      & .hsfc-ProgressBar__Text {
        font-size:1rem; color:var(--color-hs-form-label-text);
        &:before {
          content:'Form Progress:';
        }
      }
      & .hsfc-ProgressBar__Progress {
        width:100%; height:1rem; border-radius:9999px; background:var(--color-hs-form-progress-bar-bg); outline:1px solid var(--color-hs-form-progress-bar-border); overflow:hidden;
        & > div {
          width:100%; height:1rem; background:var(--color-hs-form-progress-bar-fill); border-radius:9999px;
        }
      }
      
      /* Specific styling for repositioned progress bars */
      &.hsfc-ProgressBar--repositioned {
        margin-top:1rem; margin-bottom:1rem;
        order:2; /* Ensure progress bar appears after validation errors (order:1) but before form fields (order:3) */
        flex-shrink:0;
      }
    }

    & .hsfc-CustomValidationError {
      margin-top:1rem; margin-bottom:1.5rem; padding:0.75rem 1rem; background:var(--color-hs-form-error-box-bg); border:1px solid var(--color-hs-form-error-box-border); font-size:0.875rem; line-height:1.375; color:var(--color-hs-form-error-box-text); 
      order:1; /* Ensure validation error appears before progress bar (order:2) but after intro content (order:0) */
      & > div {
        font-weight:bold; margin-bottom:0.5rem;
      }
      & ul  {
        list-style-type:disc; padding-left:1.25rem;
        & li {
          margin-bottom:0.25rem; color:var(--color-hs-form-error-box-text);
          & a {
            color:var(--color-hs-form-error-box-text); font-size:0.875rem; text-decoration:underline; cursor:pointer;
          }
        }
      }
      
      /* Ensure proper spacing when error appears before progress bar */
      & + .hsfc-ProgressBar--repositioned,
      & + .hsfc-ProgressBar { margin-top:0; }
      
      /* Ensure proper spacing when error appears before form fields */
      & + .hs-form-field,
      & + .hsfc-FormField, & + .hsfc-Row { margin-top:0; }
    }
  }

  /* Reverse theme styles (for dark backgrounds) */
  .hs-form-reverse & {
    & form {
      & .hsfc-Row {
        & input[type=text], & input[type=email], & input[type=tel], & select, & textarea, & .hsfc-DropdownInput input[type="button"] {
          background:var(--color-hs-form-reverse-field-bg);
        }
        & input[type=checkbox]:checked, & input[type=radio]:checked {
          background:var(--color-hs-form-reverse-field-checked-bg);
        }
        & label, & .hsfc-FieldLabel__RequiredIndicator, & .hsfc-ErrorAlert, & .hsfc-InfoAlert, & .hsfc-FieldDescription, .hsfc-FieldDescription span, & .hsfc-FileInput, & .hsfc-RichText, & label:not(:has(.hsfc-FieldLabel__RequiredIndicator)) > span::after, & .hsfc-ProgressBar .hsfc-ProgressBar__Text, & h1, & h2, & h3, & p, & a {
          color:var(--color-hs-form-reverse-text);
        }
        & .hsfc-RichText a {
          color:var(--color-hs-form-reverse-link);
            text-decoration:underline;
          &:hover {
            text-decoration-color:transparent;
          }
        }
        & .hsfc-FieldDescription span {
          color:var(--color-hs-form-reverse-text) !important;
        }
        & .hsfc-PhoneInput {
          & .hsfc-PhoneInput__FlagAndCaret {
            background:var(--color-hs-form-reverse-field-bg);
          }
        }
        & .hsfc-FileInput {
          display:flex; flex-direction:column; font-size:0.875rem;
          &::file-selector-button {
            margin-right:0.5rem; padding-top:0.25rem; padding-bottom:0.25rem; padding-left:1rem; padding-right:1rem; background:var(--color-hs-form-reverse-btn-ancillary-bg); color:var(--color-hs-form-reverse-btn-ancillary-text); /* hover/focus handled below */
          }
        }
        & .hsfc-ErrorAlert {
          &::before { background:var(--color-hs-form-reverse-field-bg);
          }
        }
        & .hsfc-CharacterCounter {
          color:var(--color-hs-form-reverse-text) !important;
        }
      }
      & .hsfc-NavigationRow {
        & button { 
          background:var(--color-hs-form-reverse-btn-primary-bg); border:2px solid var(--color-hs-form-reverse-btn-primary-border); color:var(--color-hs-form-reverse-btn-primary-text); 
          &[type="submit"], &[type="button"] {
            background-color:var(--color-hs-form-reverse-btn-primary-bg); border-color:var(--color-hs-form-reverse-btn-primary-border); color:var(--color-hs-form-reverse-btn-primary-text);
          }
          &:hover {
            background:var(--color-hs-form-reverse-btn-primary-hover-bg); border-color:var(--color-hs-form-reverse-btn-primary-hover-border); color:var(--color-hs-form-reverse-btn-primary-hover-text);
          }
          &:focus {
            background:var(--color-hs-form-reverse-btn-primary-focus-bg); border-color:var(--color-hs-form-reverse-btn-primary-focus-border); color:var(--color-hs-form-reverse-btn-primary-focus-text);
          }
        }
      }
      & .hsfc-ProgressBar {
        & .hsfc-ProgressBar__Text {
          color:var(--color-hs-form-reverse-text);
        }
        & .hsfc-ProgressBar__Progress {
          background:var(--color-hs-form-reverse-progress-bar-bg); outline:1px solid var(--color-hs-form-reverse-progress-bar-border);
          & > div {
            background:var(--color-hs-form-reverse-progress-bar-fill);
          }
        }
      }
    }
  }
  
  /* 
   * Absolute flexbox ordering rules to ensure validation errors always appear above progress bars
   * regardless of their DOM insertion order. These rules use CSS flexbox order property
   * to control visual order without changing the actual DOM structure.
   */
  .hsfc-ProgressBar--repositioned ~ .hsfc-CustomValidationError {
    order:1 !important;
  }
  
  .hsfc-CustomValidationError ~ .hsfc-ProgressBar--repositioned {
    order:2 !important;
  }
}

/* Utility classes for custom integration */
.hsfc-enhanced {
  /* Additional utility class for scoped enhancements */
}

/* Accessibility improvements */
@media (prefers-reduced-motion:reduce) {
  div[data-hsfc-id=Renderer] form {
    & .hsfc-NavigationRow button,
    & .hsfc-FileInput::file-selector-button {
      transition:none;
    }
  }
}

/* High contrast mode support */
@media (prefers-contrast:high) {
  div[data-hsfc-id=Renderer] form {
    & .hsfc-Row {
      & input[type=text], & input[type=email], & input[type=tel], & select, & textarea, & .hsfc-DropdownInput input[type="button"] {
        border-width:2px;
      }
      & .hsfc-ErrorAlert {
        border-width:2px;
        font-weight:900;
      }
    }
  }
}
